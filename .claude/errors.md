ImportError: cannot import name 'require_api_key' from 'services.validation' (/app/services/validation.py)

INFO:     Waiting for child process [1317]

INFO:     Child process [1317] died

INFO:     Waiting for child process [1323]

INFO:     Child process [1323] died

INFO:     Waiting for child process [1318]

INFO:     Child process [1318] died

2026-02-04 10:43:37,484 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/audit_log?select=id&limit=1⁠ "HTTP/2 200 OK"

2026-02-04 10:43:37,506 [INFO] oversight-agent: Supabase connection verified successfully

2026-02-04 10:43:37,743 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_media?select=caption%2Clike_count%2Ccomments_count%2Creach%2Cpublished_at&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:37,744 [INFO] oversight-agent: Schema OK: instagram_media

2026-02-04 10:43:38,012 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_business_accounts?select=username%2Cname%2Caccount_type%2Cfollowers_count&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,013 [INFO] oversight-agent: Schema OK: instagram_business_accounts

2026-02-04 10:43:38,030 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/audit_log?select=id&limit=1⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,031 [INFO] oversight-agent: Supabase connection verified successfully

2026-02-04 10:43:38,045 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/audit_log?select=id&limit=1⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,047 [INFO] oversight-agent: Supabase connection verified successfully

2026-02-04 10:43:38,049 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/audit_log?select=id&limit=1⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,050 [INFO] oversight-agent: Supabase connection verified successfully

2026-02-04 10:43:38,271 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_comments?select=text%2Csentiment%2Cbusiness_account_id%2Ccreated_at&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,271 [INFO] oversight-agent: Schema OK: instagram_comments

2026-02-04 10:43:38,278 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_media?select=caption%2Clike_count%2Ccomments_count%2Creach%2Cpublished_at&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,279 [INFO] oversight-agent: Schema OK: instagram_media

2026-02-04 10:43:38,301 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_media?select=caption%2Clike_count%2Ccomments_count%2Creach%2Cpublished_at&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,301 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_media?select=caption%2Clike_count%2Ccomments_count%2Creach%2Cpublished_at&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,301 [INFO] oversight-agent: Schema OK: instagram_media

2026-02-04 10:43:38,302 [INFO] oversight-agent: Schema OK: instagram_media

2026-02-04 10:43:38,533 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_dm_conversations?select=customer_instagram_id%2Cbusiness_account_id%2Cwithin_window&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,534 [INFO] oversight-agent: Schema OK: instagram_dm_conversations

2026-02-04 10:43:38,543 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_business_accounts?select=username%2Cname%2Caccount_type%2Cfollowers_count&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,543 [INFO] oversight-agent: Schema OK: instagram_business_accounts

2026-02-04 10:43:38,557 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_business_accounts?select=username%2Cname%2Caccount_type%2Cfollowers_count&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,558 [INFO] oversight-agent: Schema OK: instagram_business_accounts

2026-02-04 10:43:38,559 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_business_accounts?select=username%2Cname%2Caccount_type%2Cfollowers_count&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,559 [INFO] oversight-agent: Schema OK: instagram_business_accounts

2026-02-04 10:43:38,797 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_dm_messages?select=message_text%2Cconversation_id%2Cis_from_business%2Csent_at&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,797 [INFO] oversight-agent: Schema OK: instagram_dm_messages

2026-02-04 10:43:38,802 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_comments?select=text%2Csentiment%2Cbusiness_account_id%2Ccreated_at&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,802 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_comments?select=text%2Csentiment%2Cbusiness_account_id%2Ccreated_at&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,803 [INFO] oversight-agent: Schema OK: instagram_comments

2026-02-04 10:43:38,803 [INFO] oversight-agent: Schema OK: instagram_comments

2026-02-04 10:43:38,813 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_comments?select=text%2Csentiment%2Cbusiness_account_id%2Ccreated_at&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:38,813 [INFO] oversight-agent: Schema OK: instagram_comments

2026-02-04 10:43:39,043 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_dm_conversations?select=customer_instagram_id%2Cbusiness_account_id%2Cwithin_window&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:39,043 [INFO] oversight-agent: Schema OK: instagram_dm_conversations

2026-02-04 10:43:39,057 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/audit_log?select=event_type%2Caction%2Cdetails%2Cresource_type&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:39,058 [INFO] oversight-agent: Schema OK: audit_log

2026-02-04 10:43:39,058 [INFO] oversight-agent: All required schema validations passed

2026-02-04 10:43:39,074 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_dm_conversations?select=customer_instagram_id%2Cbusiness_account_id%2Cwithin_window&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:39,074 [INFO] oversight-agent: Schema OK: instagram_dm_conversations

2026-02-04 10:43:39,083 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/instagram_dm_conversations?select=customer_instagram_id%2Cbusiness_account_id%2Cwithin_window&limit=0⁠ "HTTP/2 200 OK"

2026-02-04 10:43:39,083 [INFO] oversight-agent: Schema OK: instagram_dm_conversations

2026-02-04 10:43:39,317 [INFO] httpx: HTTP Request: GET https://uromexjprcrjfmhkmgxa.supabase.co/rest/v1/prompt_templates?select=prompt_key%2Ctemplate%2Cversion%2Cis_active&limit=0⁠ "HTTP/2 404 Not Found"

2026-02-04 10:43:39,318 [WARNING] oversight-agent: Optional table 'prompt_templates' not found — using default prompts

2026-02-04 10:43:39,320 [INFO] httpx: HTTP Request: GET
2026-02-04 10:43:39,322 [INFO] oversight-agent: Schema OK: instagram_dm_messages

Process SpawnProcess-562:

Traceback (most recent call last):

  File "/usr/local/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap

    self.run()

  File "/usr/local/lib/python3.12/multiprocessing/process.py", line 108, in run

    self._target(*self._args, **self._kwargs)

  File "/usr/local/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started

    target(sockets=sockets)

  File "/usr/local/lib/python3.12/site-packages/uvicorn/supervisors/multiprocess.py", line 64, in target

    return self.real_target(sockets)

           ^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run

    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/asyncio/runners.py", line 195, in run

    return runner.run(main)

           ^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/asyncio/runners.py", line 118, in run

    return self._loop.run_until_complete(task)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete

  File "/usr/local/lib/python3.12/site-packages/uvicorn/server.py", line 71, in serve

    await self._serve(sockets)

  File "/usr/local/lib/python3.12/site-packages/uvicorn/server.py", line 78, in _serve

    config.load()

  File "/usr/local/lib/python3.12/site-packages/uvicorn/config.py", line 439, in load

    self.loaded_app = import_from_string(self.app)

                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string

    module = importlib.import_module(module_str)

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/importlib/__init__.py", line 90, in import_module

    return _bootstrap._gcd_import(name[level:], package, level)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import

  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load

  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked

  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked

  File "<frozen importlib._bootstrap_external>", line 999, in exec_module

  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed

  File "/app/agent.py", line 30, in <module>

    from services.prompt_service import PromptService

  File "/app/services/__init__.py", line 1, in <module>

    from .validation import require_api_key, CommentApprovalRequest, DMApprovalRequest, PostApprovalRequest

ImportError: cannot import name 'require_api_key' from 'services.validation' (/app/services/validation.py)

2026-02-04 10:43:39,367 [INFO] httpx: HTTP Request: GET
# ==============================================
# HOW TO USE THIS FILE
# ==============================================
# Copy to .env.production and fill in real values.
# Never commit .env.production to git.
#
# Docker service topology (from docker-compose.yml):
#   Service name      Container name      Host port
#   frontend          instagram-frontend  8080 → nginx:80
#   backend           instagram-backend   3001 → 3001
#   langchain-agent   langchain-agent     3002 → 3002
#   redis             agent-redis         6379 → 6379
#   ollama            ollama              (no host port - internal only)
#
# When testing with docker compose, the BROWSER always hits host ports:
#   Frontend  → http://localhost:8080
#   Backend   → http://localhost:3001
#   Agent     → http://localhost:3002   (direct curl tests only)
#
# Container-to-container calls use service names:
#   backend  → agent   : AGENT_URL=http://langchain-agent:3002
#   agent    → backend : BACKEND_API_URL=http://backend:3001
#   agent    → ollama  : OLLAMA_HOST=http://ollama:11434
#   agent    → redis   : REDIS_HOST=redis

# ==============================================
# Supabase (Source of Truth)
# ==============================================
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_KEY=your-supabase-anon-or-service-role-key

# ==============================================
# Ollama AI Model Server
# ==============================================
# Docker internal (set in docker-compose.yml environment block — do not override here)
OLLAMA_HOST=http://ollama:11434
OLLAMA_MODEL=nemotron:8b-q5_K_M

# ==============================================
# Agent Security
# ==============================================
# Must match AGENT_API_KEY in backend .env.production
AGENT_API_KEY=your-secret-api-key-here
# Sent as X-User-ID in all backend proxy calls for per-user rate limiting
AGENT_USER_ID=agent-service

# ==============================================
# Server
# ==============================================
FLASK_PORT=3002
MAX_CONCURRENT_LLM=4

# ==============================================
# CORS
# ==============================================
# Defaults in config.py already cover Docker local testing:
#   http://localhost:8080  (frontend via Docker)
#   http://localhost:3001  (backend via Docker)
#   http://localhost:3002  (agent direct test clients)
#
# In production, lock down to exact origins:
# CORS_ALLOW_ORIGINS=https://app.888intelligenceautomation.in,https://api.888intelligenceautomation.in

# ==============================================
# Backend Proxy (Instagram API calls via backend)
# ==============================================
# Docker internal — backend service name from docker-compose.yml
BACKEND_API_URL=http://backend:3001
# Production override:
# BACKEND_API_URL=https://api.888intelligenceautomation.in

# ==============================================
# Redis Cache
# ==============================================
# Set in docker-compose.yml environment block — override here only if needed
REDIS_HOST=redis
REDIS_PORT=6379

# ==============================================
# Engagement Monitor
# ==============================================
ENGAGEMENT_MONITOR_ENABLED=true
ENGAGEMENT_MONITOR_INTERVAL_MINUTES=5
ENGAGEMENT_MONITOR_MAX_COMMENTS_PER_RUN=50
ENGAGEMENT_MONITOR_MAX_CONCURRENT_ANALYSES=3
ENGAGEMENT_MONITOR_HOURS_BACK=24
ENGAGEMENT_MONITOR_AUTO_REPLY_ENABLED=true
ENGAGEMENT_MONITOR_CONFIDENCE_THRESHOLD=0.75

# ==============================================
# Content Scheduler
# ==============================================
CONTENT_SCHEDULER_ENABLED=true
AUTO_PUBLISH=false
# Minimum quality score (0.0-1.0) for LLM-evaluated captions to be approved
POST_APPROVAL_THRESHOLD=0.6

# ==============================================
# Sales Attribution
# ==============================================
SALES_ATTRIBUTION_ENABLED=true
ORDER_WEBHOOK_SECRET=your-order-webhook-hmac-secret

# ==============================================
# Weekly Attribution Learning
# ==============================================
WEEKLY_LEARNING_ENABLED=true

# ==============================================
# UGC Collection
# ==============================================
UGC_COLLECTION_ENABLED=true
AUTO_SEND_DM=false

# ==============================================
# Analytics Reports
# ==============================================
ANALYTICS_REPORTS_ENABLED=true
ANALYTICS_LLM_INSIGHTS_ENABLED=false

# ==============================================
# Oversight Brain
# ==============================================
OVERSIGHT_STREAM_ENABLED=true
OVERSIGHT_AUTO_CONTEXT_LIMIT=12
OVERSIGHT_LLM_TIMEOUT_SECONDS=15
# OVERSIGHT_RATE_LIMIT is hardcoded to 20/minute per user in config.py

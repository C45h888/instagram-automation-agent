# =====================================================================
# UNIFIED ENV — instagram-automation-agent/.env
# Copy this file to .env and fill in real values.
# Never commit .env — it is in .gitignore.
#
# Variables hard-set in docker-compose.unified.yml environment: blocks
# (AGENT_URL, BACKEND_API_URL, OLLAMA_HOST, REDIS_HOST, NODE_ENV, PORT)
# are NOT listed here — compose injects them and they cannot be
# accidentally overridden via this file.
# =====================================================================

# ─────────────────────────────────────────────
# Supabase
# NOTE: backend reads SUPABASE_SERVICE_KEY; agent reads SUPABASE_KEY.
# Both should be the service-role (admin) key for production.
# ─────────────────────────────────────────────
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_SERVICE_KEY=your-supabase-service-role-key
SUPABASE_KEY=your-supabase-service-role-key          # agent var name
SUPABASE_ANON_KEY=your-supabase-anon-key             # backend optional

# ─────────────────────────────────────────────
# Shared Security
# ─────────────────────────────────────────────
# Must match in both backend + agent (agent validates X-API-Key header)
AGENT_API_KEY=generate-a-strong-random-secret

# AES-256-GCM key for encrypting stored Instagram tokens in Supabase
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=64-char-hex-string

# ─────────────────────────────────────────────
# Instagram / Meta
# ─────────────────────────────────────────────
INSTAGRAM_APP_ID=your-meta-app-id
INSTAGRAM_APP_SECRET=your-meta-app-secret
META_APP_SECRET=your-meta-app-secret         # alias for webhook-verification.js
INSTAGRAM_VERIFY_TOKEN=your-webhook-verify-token
ORDER_WEBHOOK_SECRET=your-order-webhook-hmac-secret

# ─────────────────────────────────────────────
# Backend Runtime
# ─────────────────────────────────────────────
FRONTEND_URL=http://localhost:8080            # CORS origin; swap to prod URL in production
ALLOWED_ORIGIN_1=https://app.888intelligenceautomation.in
ALLOWED_ORIGIN_2=https://api.888intelligenceautomation.in
OAUTH_REDIRECT_URI=https://app.888intelligenceautomation.in/auth/callback
POST_FALLBACK_ENABLED=true
PROACTIVE_SYNC_ENABLED=true
HEARTBEAT_STALE_MINUTES=30

# ─────────────────────────────────────────────
# Agent Runtime
# ─────────────────────────────────────────────
OLLAMA_MODEL=hf.co/MaziyarPanahi/Nemotron-Orchestrator-8B-GGUF:Q5_K_M
MAX_CONCURRENT_LLM=4
AGENT_USER_ID=agent-service

# Stable UUID — generate once: python -c "import uuid; print(uuid.uuid4())"
HEARTBEAT_AGENT_ID=your-stable-uuid-here
HEARTBEAT_ENABLED=true
HEARTBEAT_INTERVAL_MINUTES=20

# Agent feature flags
ENGAGEMENT_MONITOR_ENABLED=true
ENGAGEMENT_MONITOR_INTERVAL_MINUTES=5
ENGAGEMENT_MONITOR_MAX_COMMENTS_PER_RUN=50
ENGAGEMENT_MONITOR_AUTO_REPLY_ENABLED=true
ENGAGEMENT_MONITOR_CONFIDENCE_THRESHOLD=0.75
ENGAGEMENT_MONITOR_HOURS_BACK=24
CONTENT_SCHEDULER_ENABLED=true
AUTO_PUBLISH=false
POST_APPROVAL_THRESHOLD=0.6
SALES_ATTRIBUTION_ENABLED=true
WEEKLY_LEARNING_ENABLED=true
UGC_COLLECTION_ENABLED=true
UGC_COLLECTION_AUTO_SEND_DM=false
UGC_COLLECTION_AUTO_REPOST=false
ANALYTICS_REPORTS_ENABLED=true
ANALYTICS_LLM_INSIGHTS_ENABLED=false
OVERSIGHT_STREAM_ENABLED=true
OVERSIGHT_AUTO_CONTEXT_LIMIT=12
OVERSIGHT_LLM_TIMEOUT_SECONDS=15
OUTBOUND_QUEUE_ENABLED=true

# ─────────────────────────────────────────────
# Frontend Build Args (baked into Nginx image at build time)
# Exact match of dashboard/Dockerfile ARG list (19 vars)
# ─────────────────────────────────────────────
VITE_AUTH_MODE=supabase
VITE_META_APP_ID=your-meta-app-id
VITE_META_APP_SECRET=your-meta-app-secret
VITE_OAUTH_REDIRECT_URI=https://app.888intelligenceautomation.in/auth/callback
VITE_SUPABASE_URL=https://your-project-ref.supabase.co
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key
VITE_API_BASE_URL=http://localhost:3001
VITE_WEBHOOK_URL=https://app.888intelligenceautomation.in/webhook
VITE_WEBHOOK_VERIFY_TOKEN=your-webhook-verify-token
VITE_SHOW_ADMIN_LINK=false
N8N_BASE_URL=
N8N_DM_WEBHOOK=
N8N_COMMENT_WEBHOOK=
N8N_ORDER_WEBHOOK=
DELETION_MAX_RETRIES=3
DELETION_RETRY_BASE_MINUTES=5
DELETION_ENABLE_AUTO_RETRY=false
CRON_API_KEY=your-cron-api-key
ADMIN_API_KEY=your-admin-api-key
